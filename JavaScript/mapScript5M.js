var map;window.onload=function(){};var infoWindow,markers=[];const image="https://cdn.jsdelivr.net/gh/familybrandsllc/Maps@main/Markers/famBrandsPin.png";var clus=0;function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:35.904038,lng:-83.956548},zoom:5,mapId:"abdbe66e943379c5",streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1}),infoWindow=new google.maps.InfoWindow,searchStores(),hideSearchDiv(),document.getElementById("noStores").classList.add("hide")}function hideSearchDiv(){document.getElementById("searchDiv").classList.add("shrink")}function showSearchDiv(){document.getElementById("searchDiv").classList.remove("shrink")}function showNoStoresMessage(){document.getElementById("noStores").classList.remove("hide")}function hideNoStoresMessage(){setTimeout(function(){document.getElementById("noStores").classList.add("hide")},2700)}function clusterStores(){mcOptions={styles:[{height:40,url:"https://cdn.jsdelivr.net/gh/familybrandsllc/Maps@main/Markers/m1111.png",width:40,anchorText:[14,0]},{height:48,url:"https://cdn.jsdelivr.net/gh/familybrandsllc/Maps@main/Markers/m2222.png",width:48,anchorText:[18,0]},{height:56,url:"https://cdn.jsdelivr.net/gh/familybrandsllc/Maps@main/Markers/m3333.png",width:56,anchorText:[22,0]},{height:80,url:"https://cdn.jsdelivr.net/gh/familybrandsllc/Maps@main/Markers/m4444.png",width:80,anchorText:[34,0]},{height:90,url:"https://cdn.jsdelivr.net/gh/familybrandsllc/Maps@main/Markers/m5555.png",width:90,anchorText:[45,0]}]};var e=new MarkerClusterer(map,markers,mcOptions);1==clus&&e.clearMarkers(),clus=1}function clearCluster(){clus=1,clusterStores()}function newSearch(){searchStores(document.getElementById("zip-code-input").value=""),document.querySelector(".stores-list").innerHTML=null}function searchStores(){var e=[],t=document.getElementById("zip-code-input").value,n=99;if(hideSearchDiv(),t){for(var s of(n=0,stores)){s.properties.Zip==t&&(e.push(s),n++)}if(0==n){e=stores,showSearchDiv();document.getElementById("zip-code-input").value="";showNoStoresMessage(),hideNoStoresMessage()}else{displayStores(e.slice(0,60)),showSearchDiv();document.getElementById("zip-code-input").value=""}}else e=stores;document.getElementById("zip-code-input").value="";clearLocations(),showStoresMarkers(e),setOnClickListener(),clusterStores()}function clearLocations(){infoWindow.close();for(var e=0;e<markers.length;e++)markers[e].setMap(null);markers=[]}function setOnClickListener(){document.querySelectorAll(".store-container").forEach(function(e,t){e.addEventListener("click",function(){console.log("list Clicked"),new google.maps.event.trigger(markers[t],"click")})})}function displayStores(e){var t="";for(var[n,s]of e.entries()){var o=s.properties.Name,r=s.properties.Street,a=s.properties.City,i=s.properties.State,c=s.properties.Zip;t+=`\n            <a href="${"https://www.google.com/maps/search/?api=1&query="+new google.maps.LatLng(s.geometry.coordinates[1],s.geometry.coordinates[0])}" target="_blank" class="store-container">\n            \n              <div class="store-container-background">\n                <div class="store-info-container">\n                \t<div class="store-info-name">\n          \t\t\t\t\t${o}\n        \t\t\t\t\t</div>\n                  <div class="store-address">\n                    <span>${r}</span>\n                    <span>${a}, ${i} ${c}</span>\n                  </div>\n               \t</div>\n              </div>\n            \n            </a>\n    `,document.querySelector(".stores-list").innerHTML=t}}function showStoresMarkers(e){var t=new google.maps.LatLngBounds;for(var[n,s]of e.entries()){var o=new google.maps.LatLng(s.geometry.coordinates[1],s.geometry.coordinates[0]),r=s.properties.Name,a=s.properties.Street,i=s.properties.City,c=s.properties.State,l=s.properties.Zip;t.extend(o),createMarker(o,r,a,i,c,l)}e.length<2?(map.setZoom(10),map.setCenter(o)):map.fitBounds(t)}function createMarker(e,t,n,s,o,r){var a=`\n      <div class="store-info-window">\n        <div class="store-info-name">\n          ${t}\n        </div>\n       \t\t\n        <div class="store-info-address">\n          ${n}\n        </div>\n        <div class="store-info-address">\n          ${s}, ${o} ${r}\n        </div>\n        \t\t<a href="${"https://www.google.com/maps/search/?api=1&query="+e}" target="_blank" class="circle">\n        \t\t\t\n            \t\t\t<i class="fas fa-location-arrow"></i>\n          \t\t\n            </a>  \n      </div>\n  \t`,i=new google.maps.Marker({icon:image,map:map,position:e,animation:google.maps.Animation.DROP});google.maps.event.addListener(i,"click",function(){infoWindow.setContent(a),infoWindow.open(map,i)}),google.maps.event.addListener(map,"click",function(){infoWindow.close()}),markers.push(i)}document.getElementById("zip-code-input").onkeydown=function(e){13==e.keyCode&&searchStores(document.getElementById("zip-code-input").value)};var intervalId=window.setInterval(function(){0==markers.length&&searchStores(document.getElementById("zip-code-input").value="")},2e3);
